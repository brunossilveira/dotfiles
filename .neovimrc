call plug#begin('~/.config/nvim/plugged')

Plug 'vim-airline/vim-airline'
Plug 'ctrlpvim/ctrlp.vim'
Plug 'vim-ruby/vim-ruby'
Plug 'thoughtbot/vim-rspec'
Plug 'tpope/vim-rails'
Plug 'tpope/vim-rake'
Plug 'tpope/vim-haml'
Plug 'tpope/vim-surround'
Plug 'tpope/vim-sensible'
Plug 'tpope/vim-markdown'
Plug 'tpope/vim-endwise'
Plug 'tpope/vim-dispatch'
Plug 'mileszs/ack.vim'
Plug 'Shougo/deoplete.nvim', { 'do': ':UpdateRemotePlugins' }
Plug 'janko-m/vim-test'
Plug 'kchmck/vim-coffee-script'
Plug 'neomake/neomake'

call plug#end()

set encoding=utf-8
set mouse=a
set nu
syntax enable
syntax on
filetype plugin indent on

augroup myfiletypes
  " Clear old autocmds in group
  autocmd!
  " autoindent with two spaces, always expand tabs
  autocmd FileType ruby,eruby,yaml,coffee,js setlocal ai sw=2 sts=2 et
  autocmd FileType ruby,eruby,yaml,coffee,js setlocal path+=lib
  " Make ?s part of words
  autocmd FileType ruby,eruby,yaml setlocal iskeyword+=?
augroup END

let mapleader = ","

"ctrlp configs
let g:ctrlp_max_files=0
let g:ctrlp_max_depth=40

"Show line number
:set number

au BufRead,BufNewFile Podfile set filetype=ruby
au BufRead,BufNewFile Berksfile set filetype=ruby
au BufRead,BufNewFile Berksfile set filetype=ruby
au BufRead,BufNewFile *.hamlc set filetype=haml
au BufRead,BufNewFile *.rake set filetype=ruby
au BufRead,BufNewFile *.ejs set filetype=html

""Smarter tab extension
let g:airline#extensions#tabline#enabled = 1
let g:airline_powerline_fonts = 1

""JSX Syntax
let g:jsx_ext_required = 0

" Default settings
set ts=2 sts=2 sw=2 expandtab

"Indent guides
let g:indent_guides_start_level = 2
let g:indent_guides_guide_size = 1

" Automatically removing all trailing whitespace
autocmd BufWritePre * :%s/\s\+$//e

"Abbreviations
ab pry require 'pry';binding.pry

set wildignore=*.swp,*.bak,*.pyc,*.class

set nobackup
set noswapfile

" show when searching
set incsearch

" highlight all occurrences when searching
set hlsearch

" ruby
autocmd FileType ruby,eruby set omnifunc=rubycomplete#Complete
autocmd FileType ruby,eruby let g:rubycomplete_buffer_loading = 1
autocmd FileType ruby,eruby let g:rubycomplete_rails = 1
autocmd FileType ruby,eruby let g:rubycomplete_classes_in_global = 1

:set background=dark

set clipboard=unnamed

if executable('ag')
	let g:ackprg = 'ag --vimgrep'
endif

:set binary
:set noeol

let g:deoplete#enable_at_startup = 1

" Calls neomake when saving file and opens up the list automatically
call neomake#configure#automake('w')
let g:neomake_open_list = 2

map <Leader>t :w<cr>:call RunCurrentSpecFile()<CR>
map <Leader>o :w<cr>:call RunNearestSpec()<CR>

let g:rspec_command = "!clear && bin/rspec {spec}"
let g:rspec_runner = "os_x_iterm2"
